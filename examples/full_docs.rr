// ==========================================
// RiriLang Comprehensive Documentation
// ==========================================

// 1. Variables & Types
// --------------------
print("--- 1. Variables ---");
let x = 10;                 // Integer
let pi = 3.14159;           // Float
let name = "Riri";          // String
let isActive = 1;           // Boolean (1=true, 0=false)

print("Integer:", x);
print("Float:", pi);
print("String:", name);

// 2. Control Flow
// ---------------
print("\n--- 2. Control Flow ---");

// If-Else
if (x > 5) {
    print("x is > 5");
} else {
    print("x is <= 5");
}

// Loops
print("Looping:");
for (let i = 0; i < 3; i = i + 1) {
    print("i =", i);
}

// Switch
let opt = 1;
switch (opt) {
    case 1: { print("Selected Option 1"); break; }
    case 2: { print("Selected Option 2"); break; }
    default: { print("Default Option"); }
}

// 3. Functions
// ------------
print("\n--- 3. Functions ---");
func add(a, b) {
    return a + b;
}
print("add(5, 10) =", add(5, 10));

// Recursion (Factorial)
func factorial(n) {
    if (n <= 1) { return 1; }
    return n * factorial(n - 1);
}
print("factorial(5) =", factorial(5));

// 4. Arrays
// ---------
print("\n--- 4. Arrays ---");
let arr = [10, 20, 30];
arr.push(40);
print("Array size:", arr.size());
// Table Print
print("Table View:");
tprint(arr);

// Sorting
print("Unsorted:");
let nums = [5, 1, 9, 3];
tprint(nums);
sort(nums);
print("Sorted:");
tprint(nums);

// 5. Math Library
// ---------------
print("\n--- 5. Math ---");
print("Abs(-10):", Math.abs(-10));
print("Max(5, 9):", Math.max(5, 9));
print("Pow(2, 3):", Math.pow(2, 3));
print("Sqrt(16):", Math.sqrt(16));
print("Random:", Math.random());

// 6. Object Oriented Programming
// ------------------------------
print("\n--- 6. OOP ---");
class User {
    let name = "";
    let age = 0;

    func init(n, a) {
        this.name = n;
        this.age = a;
    }

    func greet() {
        print("Hello, I am", this.name, "and I am", this.age, "years old.");
    }
}

let u = new User();
u.init("Alice", 25);
u.greet();

// 7. Error Handling
// -----------------
print("\n--- 7. Error Handling ---");
try {
    print("Trying risky operation...");
    // Future: throw "error";
    // Currently catches C++ runtime errors or user logic
} catch {
    print("Caught an error!");
}

// 8. Async & Networking
// ---------------------
print("\n--- 8. Async & Fetch ---");
async fn fetchData() {
    print("Fetching data from dummyjson...");
    // Blocking fetch for now
    let res = await fetch("https://dummyjson.com/products/1");
    print("Result length:", res.length());
    print("Preview:", res.substr(0, 50));
}
fetchData();

// 9. Built-in Data Structures
// ---------------------------
print("\n--- 9. Data Structures ---");

// AVL Tree
print("[AVL Tree]");
let avl = new AVL();
avl.insert(10); avl.insert(20); avl.insert(5);
avl.printInOrder();

// Max Heap
print("[Max Heap]");
let heap = new Heap();
heap.push(5); heap.push(10); heap.push(1);
print("Top:", heap.top()); // 10
print("Pop:", heap.pop()); // 10 removed
print("Top:", heap.top()); // 5
