// 12_regex.rr
print("Test 12: Regex");

let fail = 0;

// Test 1: Simple cleanup of non-digits
// Pattern: Match anything that is NOT a digit
let r = new Regex("[^0-9]");
let s = "Phone: 123-456-7890";
// Replace non-digits with empty string
let clean = r.replace(s, "");
if (clean != "1234567890") {
    print("FAIL: Regex replace failed. Got: " + clean);
    fail = 1;
}

// Test 2: Match valid email format (simple)
// Pattern: word @ word . word
let r2 = new Regex("\\w+@\\w+\\.\\w+");
if (r2.match("test@example.com")) {
    // Pass
} else {
    print("FAIL: Regex match failed for valid email");
    fail = 1;
}

if (r2.match("invalid-email")) {
    print("FAIL: Regex match succeeded for invalid email");
    fail = 1;
}

// Test 3: Replace groups
// Swap "Hello World" to "World Hello"
// Note: C++ std::regex uses $1, $2 for groups in replace string
let r3 = new Regex("(\\w+) (\\w+)");
let s3 = "Hello World";
let swap = r3.replace(s3, "$2 $1");
if (swap != "World Hello") {
    print("FAIL: Regex group replace failed. Got: " + swap);
    fail = 1;
}

if (fail == 0) {
    print("ALL TESTS PASSED");
} else {
    print("FAIL");
}
